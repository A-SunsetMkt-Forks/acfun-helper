# AcFun-Helper

<p align="center">
<img src="https://i.loli.net/2020/05/28/2k8dPLiGEZNHjny.png" width="120">
</p>
<h1 align="center">AcFun 助手</h1>

#### 介绍

AcFun-Helper 是一个适用于 AcFun（ www.acfun.cn ） 的浏览器插件。

> 🍰
> AcFun-Helper is an open source, and extensible Web Browser Extension for www.acfun.cn.

#### 公告

> 1. 评论抽奖已经完善。（2020-08-09 12：08 排除上次抽奖结果的功能已加入，到底需不需要迁移随机数生成方案@wpscott 在[#issue70](https://github.com/niuchaobo/acfun-helper/issues/70) 已经给出了说明。）
> 2. 我们插件开发组迫切需要会进行**开发**和**设计**的同志，如有兴趣，请直接加入我们的群或者提交 pr 哦 (=ﾟ ω ﾟ)=。
---

#### 主要功能
<br>

##### 界面增强

  1. 首页增加**右侧导航栏**，方便快速跳转至目标分区。
  2. **个人中心入口增强**,显示你的听众、香蕉、金香蕉、UID、直播间入口等信息。
  3. 视频投稿页面**显示点赞数**信息。
  4. **评论区标记**,在评论区给 Up 添加一个蓝色标记。（终于不用翻到顶看看 Up 主是谁了，然来 Up 和我互动了？）
  5. **文章区 Up 屏蔽**,（你说的对，但是说得太不好听了吧( ´\_ゝ`)）

##### 视频页

  1. **视频下载、弹幕下载**。（**_注意，插件不支持下载番剧_**）
  2. **自动投蕉**，并显示投蕉通知。（香蕉烂掉？不可能的！）
  3. **自定义倍速**。（0.1 倍看老婆！？(ﾟ Д ﾟ ≡ ﾟ Д ﾟ)?!）
  4. **画中画**功能。【原生的 HTML5 画中画 ！】（我也可以悄悄摸鱼了吗？(=ﾟ ω ﾟ)=）
  5. **AB 回放**功能。（两点循环播放，左右反复横跳！）
  6. **“上次观看到”时间跳转**。（暂时只支持 1P 的视频投稿，并且不支持番剧）
  7. **全局进度条**。（什么？进度条君撑不住啦？）
  8. **快捷键切换倍速**。（前进三！）
  9. **弹幕搜索及跳转**,弹幕发送者主页跳转。（就让我瞧瞧弹幕是谁在杠）
  10. 播放器**画质策略**。（针对观看 60 帧视频卡顿的用户）
  11. 进入页面**自动进入全屏**。（观影模式或网页全屏）
  12. 播放完毕**自动退出全屏**。(网页全屏或宽屏模式)
  13. 视频稿件**简介自动展开**。（弹幕键盘佬，请问这个视频的BGM是什么？爱的供养，再问自傻。Y哥我只不过是想问这首歌的BGM是什么。）
  14. 通过点击**评论区时间跳转**到视频指定位置。（空降大成功！）
  15. 自动播放下一个推荐视频。（“大家都在看”列表播放）
  16. **评论区抽奖!!!**。【自己的稿件内打开网页右侧“助手”按钮界面，自定义抽奖人数+随机+去重（单个页面内独立的一次结果是不重复的），且助手会直接给出私信中奖 Acer 的链接，并且会详细告知楼层信息 !!!!(**注意一下**，其中“独立抽奖”是指每次抽奖的结果都是单独的，每次抽奖的用户都是单独的；而“排除上次结果抽奖”是指上次抽中的用户是从本次抽奖中排除的，上次抽奖的用户不会放到本次抽奖中。)】（可以给我来个专用抽奖工具吗，咱们三七分成？( ﾟ ∀。)）

##### 直播页

  1. **Up 开播提醒**。【可以自定义关注直播，同时也可以打开“主站关注Up的直播”提醒开关关注在主站关注的Up的直播】（哎符逼哎，楼梯负一开审）
  2. **宽屏模式**。（#感谢@Sinyupl）
  3. **屏蔽礼物**,右侧弹幕列表中的礼物、关注、点赞、进场信息。（#感谢@Sinyupl）（就单纯听大伙儿吹逼吧）
  4. **m3u8 直链**看 A 站直播。（现在有超清了，少主换成超清的来了！）
  5. **增加时间 Tag** （哇，上午九点三十二分，某著名单推人突然出现了另外一位v的直播间！）    
  6. **画中画**功能。(直播的播放器也支持画中画了！)

##### 浏览器

  1. 点击插件图标弹出**快捷个人动态栏**。【关注 Up 投稿列表、直播开播列表】
  2. 右键**下载视频/文章封面**。（再也不用害羞地问封面了）
  3. **右键 AC 搜索。**
  4. 浏览器**地址栏直接搜索**主站相关关键字。[如何使用？](#searchBar)<a id="searchBarBack"></a>（可以像在主站搜索栏一样使用地址栏了,甚至可以直接输入 ACid 跳转到相应投稿哦。）   
  5. 稍后再看（只要我无限地增加稍后再看列表，那不就是另外一个收藏夹吗( ;´д`)）

###### 插件相关

  1. 配置文件导入导出。【插件配置（包含了屏蔽列表，Up 主标记列表和自动投蕉、播放器自动化配置）、播放器配置（弹幕关键词屏蔽列表、播放器配置等）】
  2. 一键清除插件配置。（点击即爆炸，如若未想好，千万别输 Y）
  3. 网络同步插件配置。（可以与服务器来同步配置了！）【服务器后端适配中和问题修复中，上线时间另定...】
  4. 联合**AcFun 直播桌面通知和下载助手**桌面程序，在直播界面的小助手弹出栏中可以直接请求程序将 Up 加入/移出 开播通知列表中。

---

#### TodoList

    - 迁移抽奖模块的随机数生成实现
    - 将抽奖的结果可选保存于sessionStorage或者IndexedDB（甚至在filesystem中的SQLite3数据库中，以便迁移数据）来防止在一段时间内出现的结果重复
    - 完善插件和播放器配置网络同步 =>（基本可用，但是火狐浏览器下同步可能会出现问题）
    - 评论投票图表
    - 评论编辑器快捷键发送
    - 为评论时间播放器快速跳转添加一个点击后自动翻到播放器位置的开关或者对话框【在点开的评论加个提示 比方说【刚刚看到这里】 又或者拉上去之后在空白的地方加一个按钮【返回刚刚的评论】 之类的】
    - 添加 稿件下抽奖、画中画模式、插件直播通知、地址栏（omnibox）支持【浏览器跳转】、弹幕下载、画质策略、弹幕搜索、评论区时间播放器快速跳转、直播时间Tag、AB回放、弹幕发送者主页跳转、全局进度条、、稍后再看 功能的使用说明

---

#### 插件本体获取

- [Chrome 扩展商店](https://chrome.google.com/webstore/detail/acfun%E5%8A%A9%E6%89%8B/jmpmiaajjammeafdklfobkfaobinefef)
- [FireFox 插件商店](https://addons.mozilla.org/zh-CN/firefox/addon/acfun%E5%8A%A9%E6%89%8B/)
- 群文件 & 公众号 <sup><a href="#connect">点击查看</a>


---

#### 安装方法

假如你能直接连接到下载地址，则直接安装；

否则

方法一：打开 Chrome 浏览器（或者同为 Chromium 内核的浏览器），地址栏输入 chrome://extensions/ （不同的浏览器可能地址不同，如 Chromium 内核的 Edge 浏览器的扩展管理页面为 edge://extensions/ ）将.crx 的文件拖拽到浏览器中间，会出现拖拽以安装的提示，如果浏览器能直接安装即成功，如果不能安装，或者提示只能通过 Chrome 网上应用商店安装该程序，请参照方法二

方法二：将.crx 的文件的扩展名改为.zip，并解压到指定的文件夹（这个文件夹不能删除！！！！【而且更新的时候你可以关掉浏览器再删掉内容再覆盖新版本的文件，注意只有在关闭浏览器的时候才能删除哦，这样就不会损失配置文件了。但是更建议使用配置导出。】）例如解压到了 test 文件夹，打开浏览器，地址栏输入 chrome://extensions/ （进入扩展管理页面）, 勾择开发者模式，点击'加载已解压的扩展程序'，选择到你刚刚.zip 文件解压出来的的 test 文件夹，点击确定。扩展程序列表随即出现你导入的扩展程序，并在地址栏旁的工具栏会显示一个红色的‘A’字母图标，即为成功。

---

#### 如何食用地址栏搜索 <a id="searchBar"></a>

首先我们点击地址栏，然后输入 ac ，按下 tab 键，接下来就可以直接搜索了[=>chromium 核心浏览器]

1. 输入关键字，插件将会请求主站搜索关键字 API，我们可以在地址栏项目的返回中选择对应的条目；或者直接回车查看主站与此条目的相关搜索结果。
2. 输入 ac 号（例如 ac16240438 ）我们就能直接得到稿件的搜索结果了（一般都是唯一一个结果，我们可以直接点击进入）。
3. 输入 - （<=对，这就是一个减号），然后直接接 ac 号，跳转【注意，番剧的 ac 号还没有做适配，所以番剧跳转是没有的哦】;例如：-ac16240438
[返回功能介绍](#searchBarBack)
---

#### 如何与 acfunlive 程序协作

> 首先我们找到 acfunlive 所下载的路径（找到名为 acfunlive.exe 所在的目录），然后我们按住 shift + 右键 ，右键菜单会有一条“在此处打开命令行窗口”（windows 10 版本的显示为“在此处打开 powershell 窗口”），然后点击进入，在命令行窗口中输入“./acfunlive.exe -web -listen”（powershell 则输入：“.\acfunlive.exe -web -listen”），然后保持命令行窗口后台运行即可。

> 如果还想查看其它用法可以在命令行中输入“./acfunlive.exe -h”。更多食用方法请在下面的#相关项目 的项目地址中查看。

---
<a id='connect'></a>
#### 联系我们 

[用户 QQ 群 296107184](https://shang.qq.com/wpa/qunwpa?idkey=fe451dc2e5c33980a1f92725370f80a21048ca5fe2e325b3e0c15f494a8001e3)

[微信公众号 AcFun 助手](https://mp.weixin.qq.com/s/-XjELn35hDd856kiMMQyvA)

#### 加入我们

    - 提个 Issue
    - 直接在群内吐槽
    - 直接提交 Pull Request

#### 开源许可证

    Released under the MPL-2.0 License.

#### 提要

    * jquery 3.5.0
    * mdui 0.4.3
    * dexie 3.0.1

#### 相关项目

插件配置同步服务:

##### @heixiaobai - [acfun-helper-synconfig](https://github.com/heixiaobai/acfun-helper-synconfig "项目地址")

独立项目：

##### @orzogc - [acfunlive AcFun 直播桌面通知和下载助手（命令行版本）](https://github.com/orzogc/acfunlive "项目地址")

##### @orzogc - [acfundanmu AcFun 直播弹幕下载](https://github.com/orzogc/acfundanmu "项目地址")

##### @wpscott - [AcfunDanmu AcFun 直播弹幕工具](https://github.com/wpscott/AcFunDanmaku "项目地址")

---

### 致谢（版面原因仅列出十位）

    * @heixiaobai https://github.com/heixiaobai
    * @Sokwva https://github.com/Sokwva
    * @Sinyupl https://github.com/Sinyupl
    * @condy0919 https://github.com/condy0919
    * @orzogc https://github.com/orzogc
    * @BDPO https://github.com/BDPO
    * @DontBeAlarmed https://github.com/DontBeAlarmed
    * @wpscott https://github.com/wpscott
    * @NocKit https://github.com/NocKit
    * @SingSky https://github.com/SingSky

---

#### 如果喜欢此插件，请务必给我们来一个 Star，如果不喜欢，请不要浪费你的口水，来一个 Star，然后再提交 Issue 来 diss；总之欢迎提出各种建议或者意见，这些宝贵的意见对以后的体验是非常重要的，不喜欢就大声说出来。![阿部高和脸](https://js2.a.yximgs.com/bs2/emotion/1587040895463third_party_b35465999.png)

---

<h1 align="center">缺~ 逼~ 乐~</h1>
